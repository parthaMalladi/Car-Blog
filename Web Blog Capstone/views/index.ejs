<%- include("partials/header.ejs") %>

<div class="container mt-4">
    <!-- Button to toggle the form -->
    <div class="d-flex justify-content-center mb-4">
        <button class="btn btn-success px-5" type="button" data-bs-toggle="collapse" data-bs-target="#formContainer" aria-expanded="false" aria-controls="formContainer">
            <span class="h5">New Entry</span>
        </button>
    </div>

    <!-- Collapsible form -->
    <div class="collapse my-3" id="formContainer">
        <form action="/submit" method="POST" class="border p-3">
            <div class="mb-3">
                <label class="form-label text-success h4">Title</label>
                <input type="text" name="title" class="form-control">
                <div class="form-text">Give a title to your blog post.</div>
            </div>

            <div class="mb-3">
                <label class="form-label text-success h4">Body</label>
                <input type="text" name="msg" class="form-control">
                <div class="form-text">Type the main contents of your blog post.</div>
            </div>

            <input type="hidden" name="deletePost" value="false">
            <input type="submit" class="btn btn-success" value="OK">
        </form>
    </div>

    <% if (locals.content) { %>
        <% content.forEach(element => { %>
            <div class="border-top">
                <h2><%= element[0] %></h2>
                <p><%= element[1] %></p>

                <form action="/submit" method="POST">
                    <input type="hidden" name="title" value="">
                    <input type="hidden" name="msg" value="">
                    <input type="hidden" name="postIndex" value=<% element[3] %>>
                    <input type="hidden" name="deletePost" value="true">
                    <input type="submit" class="btn btn-warning mb-3" value="Delete Post">
                </form>
            </div>
        <% }); %>
    <% } %>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>

<%- include("partials/footer.ejs") %>